<% const groups = (site.data.links && site.data.links.groups) || []; %>

<div class="links-wrap">
  <h1 class="links-h1">友情链接</h1>

  <% if (!groups.length) { %>
    <p class="links-empty">暂无数据。请先执行 prebuild 生成 source/_data/links.json</p>
  <% } %>

  <% groups.forEach(g => { %>
    <section class="links-group">
      <h2 class="links-title"><%= g.cat %></h2>
      <ul class="links-grid">
        <% (g.items || []).forEach(it => { %>
          <li class="links-card">
            <a href="<%= it.url %>" target="_blank" rel="noopener" class="links-a">
              <img src="<%= it.avatar || '/favicon.ico' %>" alt="<%= it.name %>"
                   class="links-avatar"
                   onerror="this.src='/favicon.ico'">
              <div class="links-meta">
                <div class="links-name"><%= it.name %></div>
                <% if (it.description) { %>
                  <div class="links-desc"><%= it.description %></div>
                <% } %>
              </div>
            </a>
          </li>
        <% }) %>
      </ul>
    </section>
  <% }) %>
</div>

<style>
.links-wrap{max-width:1100px;margin:0 auto;padding:40px 16px}
.links-h1{font-size:28px;font-weight:700;margin:0 0 8px}
.links-title{font-size:20px;font-weight:600;margin:24px 0 12px}
.links-grid{list-style:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
.links-card{border:1px solid var(--border,#e5e7eb);border-radius:16px;padding:14px;transition:box-shadow .2s}
.links-card:hover{box-shadow:0 8px 30px rgba(0,0,0,.05)}
.links-a{display:flex;align-items:center;gap:12px;text-decoration:none}
.links-avatar{width:40px;height:40px;border-radius:8px;object-fit:cover}
.links-name{font-weight:600}
.links-desc{opacity:.7;font-size:12px;margin-top:2px}
.links-empty{opacity:.7}
</style>
